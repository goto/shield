"use strict";(self.webpackChunkshield=self.webpackChunkshield||[]).push([[997],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>m});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=n.createContext({}),l=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},p=function(e){var t=l(e.components);return n.createElement(s.Provider,{value:t},e.children)},h="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),h=l(r),d=o,m=h["".concat(s,".").concat(d)]||h[d]||u[d]||a;return r?n.createElement(m,i(i({ref:t},p),{},{components:r})):n.createElement(m,i({ref:t},p))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=d;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c[h]="string"==typeof e?e:o,i[1]=c;for(var l=2;l<a;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},7665:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var n=r(7462),o=(r(7294),r(3905));const a={},i="Checking permissions in SpiceDB",c={unversionedId:"tour/check-permissions",id:"tour/check-permissions",title:"Checking permissions in SpiceDB",description:"In this part of the tour, we'll learn how can we use Shield's permission checking system. Through this we are going to verify all the relations we have created till now.",source:"@site/docs/tour/check-permissions.md",sourceDirName:"tour",slug:"/tour/check-permissions",permalink:"/shield/tour/check-permissions",draft:!1,editUrl:"https://github.com/goto/shield/edit/master/docs/docs/tour/check-permissions.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Adding to a group",permalink:"/shield/tour/add-to-group"},next:{title:"Shield as a proxy",permalink:"/shield/tour/shield-as-proxy"}},s={},l=[{value:"1 Check the owner of the organization",id:"1-check-the-owner-of-the-organization",level:2},{value:"2 Check the organization of the project",id:"2-check-the-organization-of-the-project",level:2},{value:"3 Check the organization of the group",id:"3-check-the-organization-of-the-group",level:2},{value:"4 Check the owner group of the resource",id:"4-check-the-owner-group-of-the-resource",level:2}],p={toc:l};function h(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"checking-permissions-in-spicedb"},"Checking permissions in SpiceDB"),(0,o.kt)("p",null,"In this part of the tour, we'll learn how can we use Shield's permission checking system. Through this we are going to verify all the relations we have created till now."),(0,o.kt)("p",null,"We can  either use the check API or ",(0,o.kt)("inlineCode",{parentName:"p"},"zed")," tool. In this tour we will be using the ",(0,o.kt)("inlineCode",{parentName:"p"},"zed")," tool."),(0,o.kt)("h2",{id:"1-check-the-owner-of-the-organization"},"1 Check the owner of the organization"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"zed permission check organization:4eb3c3b4-962b-4b45-b55b-4c07d3810ca8 owner user:2fd7f306-61db-4198-9623-6f5f1809df11\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"true\n")),(0,o.kt)("h2",{id:"2-check-the-organization-of-the-project"},"2 Check the organization of the project"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"shield % zed permission check project:1b89026b-6713-4327-9d7e-ed03345da288 organization organization:4eb3c3b4-962b-4b45-b55b-4c07d3810ca8\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"true\n")),(0,o.kt)("h2",{id:"3-check-the-organization-of-the-group"},"3 Check the organization of the group"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"zed permission check group:86e2f95d-92c7-4c59-8fed-b7686cccbf4f organization organization:4eb3c3b4-962b-4b45-b55b-4c07d3810ca8\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"true\n")),(0,o.kt)("h2",{id:"4-check-the-owner-group-of-the-resource"},"4 Check the owner group of the resource"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"zed permission check entropy/firehose:28105b9a-1717-47cf-a5d9-49249b6638df owner group:86e2f95d-92c7-4c59-8fed-b7686cccbf4f\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"false\n")),(0,o.kt)("p",null,"Note, this returns a false, even though we created a relation, where this group was an owner of this resource.\nLet's revisit the authz schema for ",(0,o.kt)("inlineCode",{parentName:"p"},"entropy/firehose")," where we have"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},"definition entropy/firehose {\n    ...\n    relation owner: user | group#membership\n    ...\n}\n")),(0,o.kt)("p",null,"We gave the owner right not to the group, but the entities holding ",(0,o.kt)("inlineCode",{parentName:"p"},"membership")," permisssion in the ",(0,o.kt)("inlineCode",{parentName:"p"},"group")," schema, namely ",(0,o.kt)("inlineCode",{parentName:"p"},"member + manager")," which are of type ",(0,o.kt)("inlineCode",{parentName:"p"},"user"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},"definition group {\n    ...\n    relation member: user\n    relation manager: user\n    permission membership = member + manager\n    ...\n}\n")),(0,o.kt)("p",null,"So, all the members of the group have the permission on this resource, which we have validated below."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"zed permission check entropy/firehose:28105b9a-1717-47cf-a5d9-49249b6638df owner user:598688c6-8c6d-487f-b324-ef3f4af120bb\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"true\n")))}h.isMDXComponent=!0}}]);
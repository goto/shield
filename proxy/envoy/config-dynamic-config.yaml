
admin:
  address:
    socket_address:
      address: 0.0.0.0
      port_value: 9901

node:
  cluster: test-cluster
  id: node-id

dynamic_resources:
  ads_config:
    api_type: GRPC
    grpc_services:
    - envoy_grpc:
        cluster_name: xds_cluster
  cds_config:
    ads: {}
  lds_config:
    ads: {}

static_resources:
  # listeners:
  # - name: listener_0
  #   address:
  #     socket_address:
  #       address: 0.0.0.0
  #       port_value: 8888
  #   filter_chains:
  #   - filters:
  #     - name: envoy.filters.network.http_connection_manager
  #       typed_config:
  #         "@type": type.googleapis.com/envoy.extensions.filters.network.http_connection_manager.v3.HttpConnectionManager
  #         stat_prefix: ingress_http
  #         access_log:
  #         - name: envoy.access_loggers.stdout
  #           typed_config:
  #             "@type": type.googleapis.com/envoy.extensions.access_loggers.stream.v3.StdoutAccessLog
  #         http_filters:
  #         - name: envoy.filters.http.ext_proc
  #           typed_config:
  #             "@type": type.googleapis.com/envoy.extensions.filters.http.ext_proc.v3.ExternalProcessor
  #             grpc_service:
  #               envoy_grpc:
  #                 cluster_name: ext_proc-grpc-service
  #               timeout: 0.250s
  #         - name: envoy.filters.http.router
  #           typed_config:
  #             "@type": type.googleapis.com/envoy.extensions.filters.http.router.v3.Router
  #         route_config:
  #           name: local_route
  #           virtual_hosts:
  #           - name: local_service
  #             domains: ["*"]
  #             routes:
  #             - match:
  #                 prefix: "/"
  #               route:
  #                 host_rewrite_literal: www.envoyproxy.io
  #                 cluster: upstream-service

  clusters:
  # - name: upstream-service
  #   type: LOGICAL_DNS
  #   # Comment out the following line to test on v6 networks
  #   dns_lookup_family: V4_ONLY
  #   load_assignment:
  #     cluster_name: upstream-service
  #     endpoints:
  #     - lb_endpoints:
  #       - endpoint:
  #           address:
  #             socket_address:
  #               address: www.envoyproxy.io
  #               port_value: 443
  #   transport_socket:
  #     name: envoy.transport_sockets.tls
  #     typed_config:
  #       "@type": type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext
  #       sni: www.envoyproxy.io
        
  - name: xds_cluster
    # type: static
    type: STRICT_DNS
    lb_policy: ROUND_ROBIN
    typed_extension_protocol_options:
      envoy.extensions.upstreams.http.v3.HttpProtocolOptions:
        "@type": type.googleapis.com/envoy.extensions.upstreams.http.v3.HttpProtocolOptions
        explicit_http_config:
          http2_protocol_options: {}
    load_assignment:
      cluster_name: xds_cluster
      endpoints:
      - lb_endpoints:
        - endpoint:
            address:
              socket_address:
                address: host.docker.internal
                port_value: 8081
